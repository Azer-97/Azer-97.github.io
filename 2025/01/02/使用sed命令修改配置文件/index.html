<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>sed命令的使用 | Azer</title><meta name="author" content="阿泽"><meta name="copyright" content="阿泽"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作： 定位配置文件： 首先，你需要知道节点配置文件的位置。通常，这些文件位于每个节点的配置目录下。 修改输出等级： 使用sed命令修改配置文件中的输出等级。假设配置文件中的相关行是output_level &#x3D; info，你需要将其更改为output_level">
<meta property="og:type" content="article">
<meta property="og:title" content="sed命令的使用">
<meta property="og:url" content="http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/index.html">
<meta property="og:site_name" content="Azer">
<meta property="og:description" content="要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作： 定位配置文件： 首先，你需要知道节点配置文件的位置。通常，这些文件位于每个节点的配置目录下。 修改输出等级： 使用sed命令修改配置文件中的输出等级。假设配置文件中的相关行是output_level &#x3D; info，你需要将其更改为output_level">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/%E5%B0%81%E9%9D%A2/8.jpg">
<meta property="article:published_time" content="2025-01-02T13:22:10.083Z">
<meta property="article:modified_time" content="2025-01-03T09:09:18.925Z">
<meta property="article:author" content="阿泽">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/%E5%B0%81%E9%9D%A2/8.jpg"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"top-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'sed命令的使用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/home_bg.jpg);"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(img/封面/8.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Azer</span></a><a class="nav-page-title" href="/"><span class="site-name">sed命令的使用</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div></div></nav><div id="post-info"><h1 class="post-title">sed命令的使用</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-02T13:22:10.083Z" title="发表于 2025-01-02 21:22:10">2025-01-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-03T09:09:18.925Z" title="更新于 2025-01-03 17:09:18">2025-01-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>5分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a class="disqus-comment-count" href="http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/#post-comment"><i class="fa-solid fa-spinner fa-spin"></i></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><div id="post-outdate-notice" data="{&quot;limitDay&quot;:365,&quot;messagePrev&quot;:&quot;已經過了&quot;,&quot;messageNext&quot;:&quot;天自上次更新，文章內容可能已過時。&quot;,&quot;postUpdate&quot;:&quot;2025-01-03 17:09:18&quot;}" hidden></div><h2 id="要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作："><a href="#要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作：" class="headerlink" title="要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作："></a>要使用<code>sed</code>命令修改所有区块链节点的配置文件以设置输出等级为警告级（<code>warning</code>），并设置日志存储阈值为100MB，你需要按照以下步骤操作：</h2><ol>
<li><strong>定位配置文件</strong>： 首先，你需要知道节点配置文件的位置。通常，这些文件位于每个节点的配置目录下。</li>
<li><strong>修改输出等级</strong>： 使用<code>sed</code>命令修改配置文件中的输出等级。假设配置文件中的相关行是<code>output_level = info</code>，你需要将其更改为<code>output_level = warning</code>。</li>
<li><strong>设置日志存储阈值</strong>： 同样使用<code>sed</code>命令修改配置文件中的日志存储阈值。假设配置文件中的相关行是<code>log_rotate_size = 50MB</code>，你需要将其更改为<code>log_rotate_size = 100MB</code>。</li>
<li><strong>验证更改</strong>： 更改后，你需要验证配置文件是否已正确更新。</li>
</ol>
<p>以下是一个示例脚本，它将对指定目录下所有节点的配置文件进行修改：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 节点配置文件所在的目录</span></span><br><span class="line">NODE_DIR=<span class="string">&quot;/path/to/your/nodes&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改输出等级为警告级</span></span><br><span class="line">sed -i <span class="string">&#x27;s/output_level = [^ ]*/output_level = warning/&#x27;</span> <span class="variable">$NODE_DIR</span>/*/config.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志存储阈值为100MB</span></span><br><span class="line">sed -i <span class="string">&#x27;s/log_rotate_size = [^ ]*/log_rotate_size = 100MB/&#x27;</span> <span class="variable">$NODE_DIR</span>/*/config.ini</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证更改</span></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$NODE_DIR</span>/*/config.ini; <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;Checking <span class="variable">$file</span>&quot;</span></span><br><span class="line">    grep <span class="string">&#x27;output_level = warning&#x27;</span> <span class="variable">$file</span></span><br><span class="line">    grep <span class="string">&#x27;log_rotate_size = 100MB&#x27;</span> <span class="variable">$file</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>请将<code>/path/to/your/nodes</code>替换为你的实际节点配置文件所在的目录。</p>
<p><strong>注意</strong>：</p>
<ul>
<li><code>sed -i</code>命令会直接修改文件。如果你想要保留原文件，可以去掉<code>-i</code>选项，并将修改结果重定向到一个新文件中。</li>
<li>上述脚本中的<code>sed</code>表达式假设配置项的格式是<code>output_level = info</code>和<code>log_rotate_size = 50MB</code>。如果实际配置项的格式不同，你需要相应地调整<code>sed</code>表达式。</li>
<li>在执行这些更改之前，建议备份原始的配置文件。</li>
<li>执行脚本后，你需要重启节点以使更改生效。</li>
</ul>
<p>请根据你的实际环境和配置文件的具体情况调整上述脚本。</p>
<p><code>sed</code>（stream editor）是一个在Unix和Unix-like系统中常用的流编辑器，它用于对文本数据进行过滤和转换。<code>sed</code>命令可以执行文本替换、删除、插入等操作，并且可以应用于流（如管道）或文件。</p>
<p>以下是<code>sed</code>命令的一些基本用法：</p>
<ol>
<li><p><strong>替换文本</strong>：</p>
<ul>
<li><p>将文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.txt</span><br></pre></td></tr></table></figure>

<p>中所有出现的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">old_text</span><br></pre></td></tr></table></figure>

<p>替换为</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_text</span><br></pre></td></tr></table></figure>

<p>：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/old_text/new_text/g&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>s</code>表示替换操作，<code>g</code>表示全局替换（替换所有匹配项）。</p>
</li>
</ul>
</li>
<li><p><strong>删除文本</strong>：</p>
<ul>
<li><p>删除文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.txt</span><br></pre></td></tr></table></figure>

<p>中所有包含</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern</span><br></pre></td></tr></table></figure>

<p>的行：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/pattern/d&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>d</code>表示删除操作。</p>
</li>
</ul>
</li>
<li><p><strong>插入文本</strong>：</p>
<ul>
<li><p>在文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.txt</span><br></pre></td></tr></table></figure>

<p>的每一行之前插入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_line</span><br></pre></td></tr></table></figure>

<p>：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;i\new_line&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>i</code>表示插入操作，<code>\</code>用于在替换模式中插入换行符。</p>
</li>
</ul>
</li>
<li><p><strong>追加文本</strong>：</p>
<ul>
<li><p>在文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.txt</span><br></pre></td></tr></table></figure>

<p>的每一行之后追加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new_line</span><br></pre></td></tr></table></figure>

<p>：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;a\new_line&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>a</code>表示追加操作。</p>
</li>
</ul>
</li>
<li><p><strong>打印行号</strong>：</p>
<ul>
<li><p>打印文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file.txt</span><br></pre></td></tr></table></figure>

<p>中匹配</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pattern</span><br></pre></td></tr></table></figure>

<p>的行号：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">&#x27;pattern=&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>-n</code>选项禁止自动打印所有行，<code>=</code>打印行号。</p>
</li>
</ul>
</li>
<li><p><strong>使用正则表达式</strong>：</p>
<ul>
<li><p>使用正则表达式匹配并替换文本：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;s/[0-9]/&amp; /g&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>[0-9]</code>匹配所有数字，<code>&amp;</code>代表匹配的文本。</p>
</li>
</ul>
</li>
<li><p><strong>直接修改文件</strong>：</p>
<ul>
<li><p>使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-i</span><br></pre></td></tr></table></figure>

<p>选项直接修改文件而不是输出到标准输出：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s/old_text/new_text/g&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>-i</code>选项使<code>sed</code>直接修改文件内容。</p>
</li>
</ul>
</li>
</ol>
<p><code>sed</code>命令非常强大，可以通过编写复杂的脚本来处理复杂的文本处理任务。在使用<code>sed</code>时，了解其基本命令和选项是非常重要的，因为它们允许你以非常灵活的方式编辑文本。</p>
<p>要使用<code>sed</code>命令修改<code>[log]</code>部分中的<code>enable</code>值，您可以使用以下命令：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;/\[log\]/,/^\s*$/ s/enable=true/enable=false/&#x27;</span> your_file.conf</span><br></pre></td></tr></table></figure>

<p>这里的命令解释如下：</p>
<ul>
<li><code>sed</code>：流编辑器。</li>
<li><code>-i</code>：直接修改文件内容（不输出到标准输出）。</li>
<li><code>/\[log\]/,/^\s*$/</code>：匹配从<code>[log]</code>开始到下一个空行（或文件末尾）的范围。<code>^\s*$</code> 匹配空白行或文件末尾。</li>
<li><code>s/enable=true/enable=false/</code>：在指定范围内查找<code>enable=true</code>并替换为<code>enable=false</code>。</li>
</ul>
<p>这个命令会查找文件<code>your_file.conf</code>中<code>[log]</code>部分，并在该部分内将<code>enable=true</code>替换为<code>enable=false</code>。请确保将<code>your_file.conf</code>替换为您实际的配置文件名。</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>假设您有一个名为<code>config.conf</code>的文件，内容如下：</p>
<p>plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[log]</span><br><span class="line">enable=true</span><br><span class="line">debug=true</span><br><span class="line"></span><br><span class="line">[other]</span><br><span class="line">option=1</span><br></pre></td></tr></table></figure>

<p>运行以下命令：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;/\[log\]/,/^\s*$/ s/enable=true/enable=false/&#x27;</span> config.conf</span><br><span class="line"></span><br><span class="line"><span class="comment">#更改所有节点的config.ini文件 把node3设置为黑名单</span></span><br><span class="line">sed -i <span class="string">&#x27;/\[certificat_blacklist\]/,/^\s*$/ s/;crl.0=/;crl.0=nodeid/&#x27;</span> node*/config.ini</span><br></pre></td></tr></table></figure>

<p>文件<code>config.conf</code>将被修改为：</p>
<p>plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[log]</span><br><span class="line">enable=false</span><br><span class="line">debug=true</span><br><span class="line"></span><br><span class="line">[other]</span><br><span class="line">option=1</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li><p>使用<code>-i</code>选项时，原始文件将被直接修改，不会有备份。如果你想保留原文件，可以去掉<code>-i</code>选项，并将结果重定向到另一个文件中，例如：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;/\[log\]/,/^\s*$/ s/enable=true/enable=false/&#x27;</span> your_file.conf &gt; new_file.conf</span><br></pre></td></tr></table></figure>

<p>这将创建一个新文件<code>new_file.conf</code>，其中包含修改后的内容，而原始文件<code>your_file.conf</code>保持不变。</p>
</li>
<li><p>确保您的<code>sed</code>版本支持<code>-i</code>选项。在某些系统（如macOS）中，<code>-i</code>选项可能需要额外的参数来指定备份扩展名，例如：</p>
<p>bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;&#x27;</span> <span class="string">&#x27;/\[log\]/,/^\s*$/ s/enable=true/enable=false/&#x27;</span> your_file.conf</span><br></pre></td></tr></table></figure></li>
</ul>
<p>希望这能帮助您解决问题！如果有任何疑问，请随时提问。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">阿泽</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">Azer</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="/img/%E5%B0%81%E9%9D%A2/8.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/01/03/%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/" title="图书管理系统的需求文档"><img class="cover" src="/img/%E5%B0%81%E9%9D%A2/2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">图书管理系统的需求文档</div></div><div class="info-2"><div class="info-item-1">图书管理系统需求：​	采取控制台的方式去书写图书管理系统。 分析：管理员菜单：12345678===========管理员菜单=========Hello 哈哈哈, 欢迎使用图书管理系统!1. 查找图书2. 新增图书3. 删除图书4. 显示所有图书0. 退出系统=============================  普通用户菜单：12345678==========普通用户菜单=========Hello 哈哈哈, 欢迎使用图书管理系统!1. 查找图书2. 借阅图书3. 归还图书4. 显示图书0. 退出系统=============================  图书类​    属性：图书名，作者，图书类型，图书价格，是否租借 图书集合类​    属性：图书数组，图书总数 添加功能：​	键盘录入每一个图书信息并添加，需要满足以下要求；  书名唯一  删除功能：​	键盘录入要删除的图书书名，需要满足以下要求：  图书存在删除 图书不存在，需要提示不存在，并回到初始菜单  查询功能：​   ...</div></div></div></a><a class="pagination-related" href="/2025/01/02/hello-world/" title="Hello World"><img class="cover" src="/img/%E5%B0%81%E9%9D%A2/6.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot;  More info: Writing Run server1$ hexo server  More info: Server Generate static files1$ hexo generate  More info: Generating Deploy to remote sites1$ hexo deploy  More info: Deployment </div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="comment-switch"><span class="first-comment">Disqus</span><span id="switch-btn"></span><span class="second-comment">Waline</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/%E5%A4%B4%E5%83%8F.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">阿泽</div><div class="author-info-description">瞳孔和心跳的距离 在与你对视时清零</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">6</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">1</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A6%81%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E6%89%80%E6%9C%89%E5%8C%BA%E5%9D%97%E9%93%BE%E8%8A%82%E7%82%B9%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BB%A5%E8%AE%BE%E7%BD%AE%E8%BE%93%E5%87%BA%E7%AD%89%E7%BA%A7%E4%B8%BA%E8%AD%A6%E5%91%8A%E7%BA%A7%EF%BC%88warning%EF%BC%89%EF%BC%8C%E5%B9%B6%E8%AE%BE%E7%BD%AE%E6%97%A5%E5%BF%97%E5%AD%98%E5%82%A8%E9%98%88%E5%80%BC%E4%B8%BA100MB%EF%BC%8C%E4%BD%A0%E9%9C%80%E8%A6%81%E6%8C%89%E7%85%A7%E4%BB%A5%E4%B8%8B%E6%AD%A5%E9%AA%A4%E6%93%8D%E4%BD%9C%EF%BC%9A"><span class="toc-number">1.</span> <span class="toc-text">要使用sed命令修改所有区块链节点的配置文件以设置输出等级为警告级（warning），并设置日志存储阈值为100MB，你需要按照以下步骤操作：</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.1.</span> <span class="toc-text">示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.2.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/03/dockerfile/" title="Docker 私有仓库"><img src="/img/%E5%B0%81%E9%9D%A2/7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 私有仓库"/></a><div class="content"><a class="title" href="/2025/01/03/dockerfile/" title="Docker 私有仓库">Docker 私有仓库</a><time datetime="2025-01-03T07:35:25.115Z" title="发表于 2025-01-03 15:35:25">2025-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/03/docker-compose/" title="Docker 私有仓库"><img src="/img/%E5%B0%81%E9%9D%A2/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 私有仓库"/></a><div class="content"><a class="title" href="/2025/01/03/docker-compose/" title="Docker 私有仓库">Docker 私有仓库</a><time datetime="2025-01-03T07:35:19.269Z" title="发表于 2025-01-03 15:35:19">2025-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/03/docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/" title="Docker 私有仓库"><img src="/img/%E5%B0%81%E9%9D%A2/7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 私有仓库"/></a><div class="content"><a class="title" href="/2025/01/03/docker%20%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93/" title="Docker 私有仓库">Docker 私有仓库</a><time datetime="2025-01-03T07:35:15.387Z" title="发表于 2025-01-03 15:35:15">2025-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/03/%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/" title="图书管理系统的需求文档"><img src="/img/%E5%B0%81%E9%9D%A2/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="图书管理系统的需求文档"/></a><div class="content"><a class="title" href="/2025/01/03/%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%9A%84%E9%9C%80%E6%B1%82%E6%96%87%E6%A1%A3/" title="图书管理系统的需求文档">图书管理系统的需求文档</a><time datetime="2025-01-03T07:34:09.241Z" title="发表于 2025-01-03 15:34:09">2025-01-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="sed命令的使用"><img src="/img/%E5%B0%81%E9%9D%A2/8.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="sed命令的使用"/></a><div class="content"><a class="title" href="/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" title="sed命令的使用">sed命令的使用</a><time datetime="2025-01-02T13:22:10.083Z" title="发表于 2025-01-02 21:22:10">2025-01-02</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By 阿泽</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo

  const disqusReset = conf => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: conf
    })
  }

  const loadDisqus = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyDisqus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    window.disqus_identifier = isShuoshuo ? path : '/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/'
    window.disqus_url = isShuoshuo ? location.origin + path : 'http://example.com/2025/01/02/%E4%BD%BF%E7%94%A8sed%E5%91%BD%E4%BB%A4%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/'

    const disqus_config = function () {
      this.page.url = disqus_url
      this.page.identifier = disqus_identifier
      this.page.title = 'sed命令的使用'
    }

    if (window.DISQUS) disqusReset(disqus_config)
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }

    btf.addGlobalFn('themeChange', () => disqusReset(disqus_config), 'disqus')
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if (isShuoshuo) {
    'Disqus' === 'Disqus'
      ? window.shuoshuoComment = { loadComment: loadDisqus }
      : window.loadOtherComment = loadDisqus
    return
  }

  if ('Disqus' === 'Disqus' || !false) {
    if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      GLOBAL_CONFIG_SITE.isPost && getCount()
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: '',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: true,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Disqus' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Disqus' === 'Waline' || !false) {
    if (false) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="富强,民主,文明,和谐,自由,平等,公正,法治,爱国,敬业,诚信,友善" data-fontsize="15px" data-random="false" async="async"></script><script>(() => {
  const isChatBtn = false
  const isChatHideShow = false

  if (isChatBtn) {
    const close = () => {
      Chatra('minimizeWidget')
      Chatra('hide')
    }

    const open = () => {
      Chatra('openChat', true)
      Chatra('show')
    }

    window.ChatraSetup = { startHidden: true }
  
    window.chatBtnFn = () => {
      document.getElementById('chatra').classList.contains('chatra--expanded') ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => Chatra('hide'),
      show: () => Chatra('show')
    }
  }

  (function(d, w, c) {
    w.ChatraID = ''
    var s = d.createElement('script')
    w[c] = w[c] || function() {
      (w[c].q = w[c].q || []).push(arguments)
    }
    s.async = true
    s.src = 'https://call.chatra.io/chatra.js'
    if (d.head) d.head.appendChild(s)
  })(document, window, 'Chatra')
})()</script><script async data-pjax src="xxxxxxxxx"></script></div></body></html>